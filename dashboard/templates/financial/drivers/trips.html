{% extends '../../base.html' %}
{% load static %}
{% block title %}
  {{ en_title }}
{% endblock %}
{% block driver_financial %}
  active
{% endblock %}
{% block financial_collapse %}
  show
{% endblock %}
{% block financial %}
  active
{% endblock %}
{% block breadcrumbt %}
  <li class="breadcrumb-item">
    <a a class="text-light" href="{% url 'main_dashboard' %}">Dashboard</a>
  </li>
  <li class="breadcrumb-item" aria-current="page">
    <a class="text-light" href="{% url 'drivers_wallet_list' %}">Driver Financial</a>
  </li>
  <li class="breadcrumb-item" aria-current="page">
    <a class="text-light" href="{% url 'drivers_wallet_details' driver.id %}">{{ driver.fullName }}</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a class="text-primary" href="{% url url driver.id %}">{{en_title}}</a>
  </li>
{% endblock %}

{% block content %}
  <div class="container text-center">
    <h3 class="text-primary">{{ title }}</h3>
    <form class="form-inline mt-3 d-flex justify-content-center" method="GET" action="{% url url driver.id %}">
      <div class="form-group m-2">
        <label for="start_date">تاريخ البداية:</label>
        <input type="date" class="form-control m-2" id="start_date" name="start_date" value="{{ request.GET.start_date }}" />
      </div>

      <div class="form-group m-2">
        <label for="end_date">تاريخ النهاية:</label>

        <input type="date" class="form-control m-2" id="end_date" name="end_date" value="{{ request.GET.end_date }}" />
      </div>
      <button type="submit" class="btn btn-primary">بحث</button>
    </form>
    <table class="table table-responsive-sm table-striped table-dark table-hover text-white">
      <thead>
        <tr class="text-primary">
          <th>#</th>
          <th class="text-center">الزبون</th>
          <th class="text-center">المطعم</th>
          <th class="text-center">التاريخ</th>
          <th class="text-center">تكاليف النقل</th>
          <th class="text-center">تكلفة الطلب</th>
        </tr>
      </thead>
      <tbody>
        {% for trip in trips %}
          <tr class="clickable-row" onclick="window.location.href='{% url "trip_details" trip.id %}'">
            <td>{{ trip.id }}</td>
            <td>{{ trip.client.fullName }}</td>
            <td>{{ trip.items.first.product.restaurant.restaurantName }}</td>
            <td>{{ trip.tripDate|date:'Y-m-d' }}</td>
            <td>{{ trip.deliveryCost }}ر.س</td>
            <td>{{ trip.price_with_tax_with_coupon }} ر.س</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="6">لا يوجد</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <!-- Pagination links -->
    {% if trips.has_other_pages %}
      <ul class="pagination justify-content-center bg-transparent">
        {% if trips.has_previous %}
          <li class="page-item ml-2">
            <a class="page-link btn btn-primary" href="?page=1">&laquo; الأول</a>
          </li>
          <li class="page-item ml-2">
            <a class="page-link btn btn-primary" href="?page={{ trips.previous_page_number }}">السابق</a>
          </li>
        {% endif %}
        <li class="page-item ml-2 disabled">
          <a class="page-link bg-transparent btrip-0" href="#">الصفحة {{ trips.number }} من {{ trips.paginator.num_pages }}</a>
        </li>
        {% if trips.has_next %}
          <li class="page-item ml-2">
            <a class="page-link btn btn-primary" href="?page={{ trips.next_page_number }}">التالي</a>
          </li>
          <li class="page-item ml-1">
            <a class="page-link btn btn-primary" href="?page={{ trips.paginator.num_pages }}">الأخير &raquo;</a>
          </li>
        {% endif %}
      </ul>
    {% endif %}
    <div class="text-primary  d-flex justify-content-center align-items-center">
    <div class="text-light">
      <div class="text-primary">
        إجمالي التكاليف:
      </div>
      {{total_price}} ر.س
    </div>
    
  </div> 
  </div>
{% endblock %}
